syntax = "proto3";
package orders.v1;

service OrdersService {
  rpc ListMine (ListMineRequest) returns (ListMineResponse);
  rpc CreateFromCart (CreateFromCartRequest) returns (Order);
  rpc GetById (GetByIdRequest) returns (Order);
}

message ListMineRequest { string user_id = 1; }
message ListMineResponse { repeated Order items = 1; }

message CreateFromCartRequest { string user_id = 1; }
message GetByIdRequest { string id = 1; string user_id = 2; }

message OrderItem {
  string product_id = 1;
  int32 quantity = 2;
  int64 price_cents = 3;
  string currency = 4;
}

message Order {
  string id = 1;
  string user_id = 2;
  string status = 3; // e.g. "PAID"
  int64 created_at_unix = 4;
  repeated OrderItem items = 5;
}
